import { QueryClient } from "@tanstack/react-query";

export const queryClient = new QueryClient({
    defaultOptions: {
        queries: {
            staleTime: 5 * 60 * 1000,
            gcTime: 10 * 60 * 1000,
            retry: 2,
            refetchOnWindowFocus: true,
        },
    },
});



















// Разбор каждой настройки:
//     1. staleTime: 5 * 60 * 1000 (5 минут)
// 5 * 60 * 1000 = 300,000 миллисекунд = 5 минут
// Что это означает:
//
//     Данные считаются "свежими" 5 минут после загрузки
// В течение этих 5 минут новые запросы НЕ отправляются на сервер
// Используются данные из кеша
//
// Пример:
//     10:00 - загрузили фильмы с сервера
// 10:02 - открыли компонент снова → берем из кеша (свежие)
// 10:04 - открыли компонент снова → берем из кеша (свежие)
// 10:06 - открыли компонент снова → загружаем с сервера (устарели)
// 2. gcTime: 10 * 60 * 1000 (10 минут)
// GC = Garbage Collection (сборка мусора)
// 10 * 60 * 1000 = 600,000 миллисекунд = 10 минут
// Что это означает:
//
//     Данные хранятся в памяти браузера 10 минут после закрытия компонента
// Если компонент снова откроется в течение 10 минут → данные мгновенно появятся из кеша
// Через 10 минут данные удаляются из памяти
//
// Пример:
//     10:00 - загрузили фильмы, показали пользователю
// 10:02 - пользователь ушел на другую страницу (компонент закрылся)
// 10:05 - пользователь вернулся → данные мгновенно показались из кеша
// 10:15 - пользователь вернулся → данные удалились из памяти, загружаем заново
// 3. retry: 2
// Что это означает:
//
//     Если запрос к серверу завершился ошибкой → попробовать еще 2 раза
// Всего получается 3 попытки: первая + 2 повтора
//
// Пример:
//     Попытка 1: fetch() → Ошибка сети → повторить
// Попытка 2: fetch() → Ошибка сервера → повторить
// Попытка 3: fetch() → Ошибка → показать ошибку пользователю
// Интервалы между попытками: 1 секунда, 2 секунды (экспоненциальная задержка)
// 4. refetchOnWindowFocus: true
// Что это означает:
//
//     Когда пользователь переключается между вкладками браузера
// При возврате на вкладку с вашим сайтом → автоматически обновить данные
//
// Пример:
//     10:00 - пользователь на вашем сайте, видит список фильмов
// 10:05 - переключился на другую вкладку (ВКонтакте, YouTube)
// 10:10 - вернулся на ваш сайт → автоматически загружаются свежие данные


