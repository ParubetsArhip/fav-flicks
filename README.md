# Fav-Flicks

**Fav-Flicks** is a modern web application for movie enthusiasts that allows you to conveniently manage your favorite movies and social connections with friends. The project was developed by me using Supabase for data storage and user authentication, and also uses the TMDB API to retrieve movie information: [TMDB API](https://www.themoviedb.org/documentation/api).

## Main Features

### 1. Adding and Managing Movies
- You can add movies to favorites and remove them as needed.
- Convenient movie search by title through TMDB API is implemented.

### 2. Home Page
- Displays popular movies and search results.
- You can view movie details in a modal window.

### 3. Friends and Social Interaction
- On the Friends page, you can search for friends by username.
- Follow friends and receive follows from other users.

### 4. User Profile
- The Profile page shows your followers, following, and movies added to favorites.

### 5. Authentication
- Login and Register pages are implemented for user login and registration.

### 6. Settings
- On the Settings page, you can log out of your account and manage personal data.

Fav-Flicks combines the functionality of a social network and a movie platform, creating a convenient place to search, store, and share favorite movies with friends.

## How to Run the Project

### 1. Install Dependencies
```bash
npm install
```

### 2. Set Up Database in Supabase

Create a new project in Supabase.

Go to **SQL Editor** and execute the following script to create tables and security policies:
```sql
-- üßπ Clean up old tables
drop table if exists follows cascade;
drop table if exists favorites cascade;
drop table if exists profiles cascade;

-- üë§ Profiles table (main)
create table profiles (
  id uuid not null primary key references auth.users(id) on delete cascade,
  username text,
  avatar_url text
);

-- üé¨ Favorite movies table
create table favorites (
  id bigint generated by default as identity primary key,
  user_id uuid not null references auth.users(id) on delete cascade,
  movie_id int not null,
  created_at timestamptz default now()
);

-- ü§ù Follows table
create table follows (
  id bigint generated by default as identity primary key,
  follower_id uuid not null references profiles(id) on delete cascade,
  following_id uuid not null references profiles(id) on delete cascade,
  created_at timestamptz default now(),
  unique (follower_id, following_id)
);

-- ‚úÖ Enable RLS (Row Level Security)
alter table profiles enable row level security;
alter table favorites enable row level security;
alter table follows enable row level security;

-- üîí POLICIES: profiles
create policy "select all profiles"
  on profiles for select
  using (true);

create policy "update own profile"
  on profiles for update
  using (id = auth.uid())
  with check (id = auth.uid());

-- üîí POLICIES: favorites
create policy "insert favorites"
  on favorites for insert
  with check (user_id = auth.uid());

create policy "select favorites"
  on favorites for select
  using (user_id = auth.uid());

create policy "delete favorites"
  on favorites for delete
  using (user_id = auth.uid());

-- üîí POLICIES: follows
create policy "insert follows"
  on follows for insert
  with check (follower_id = auth.uid());

create policy "select follows"
  on follows for select
  using (
    follower_id = auth.uid()
    or following_id = auth.uid()
  );

create policy "delete follows"
  on follows for delete
  using (follower_id = auth.uid());

-- ‚öôÔ∏è Trigger: create profile when user registers
create or replace function public.handle_new_user()
returns trigger as $$
begin
  insert into public.profiles (id, username, avatar_url)
  values (
    new.id,
    new.raw_user_meta_data->>'name',
    new.raw_user_meta_data->>'avatar_url'
  );
  return new;
end;
$$ language plpgsql security definer;

create trigger on_auth_user_created
after insert on auth.users
for each row
execute function public.handle_new_user();
```

### 3. Create .env File

In the project root, create a `.env` file and add your keys:
```env
VITE_API_KEY=your_TMDB_API_key
VITE_SUPABASE_URL=your_Supabase_URL
VITE_SUPABASE_ANON_KEY=your_Supabase_anonymous_key
```

### 4. Run the Project
```bash
npm run dev
```



---



# Fav-Flicks

**Fav-Flicks** ‚Äî —ç—Ç–æ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–µ –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è –ª—é–±–∏—Ç–µ–ª–µ–π –∫–∏–Ω–æ, –∫–æ—Ç–æ—Ä–æ–µ –ø–æ–∑–≤–æ–ª—è–µ—Ç —É–¥–æ–±–Ω–æ —É–ø—Ä–∞–≤–ª—è—Ç—å —Å–≤–æ–∏–º–∏ –ª—é–±–∏–º—ã–º–∏ —Ñ–∏–ª—å–º–∞–º–∏ –∏ —Å–æ—Ü–∏–∞–ª—å–Ω—ã–º–∏ —Å–≤—è–∑—è–º–∏ —Å –¥—Ä—É–∑—å—è–º–∏. –ü—Ä–æ–µ–∫—Ç –±—ã–ª —Ä–∞–∑—Ä–∞–±–æ—Ç–∞–Ω –º–Ω–æ–π —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º Supabase –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π, –∞ —Ç–∞–∫–∂–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç TMDB API –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ —Ñ–∏–ª—å–º–∞—Ö: [TMDB API](https://www.themoviedb.org/documentation/api).

## –û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –ø—Ä–æ–µ–∫—Ç–∞

### 1. –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ñ–∏–ª—å–º–∞–º–∏
- –ú–æ–∂–Ω–æ –¥–æ–±–∞–≤–ª—è—Ç—å —Ñ–∏–ª—å–º—ã –≤ –∏–∑–±—Ä–∞–Ω–Ω–æ–µ –∏ —É–¥–∞–ª—è—Ç—å –∏—Ö –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏.
- –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω —É–¥–æ–±–Ω—ã–π –ø–æ–∏—Å–∫ —Ñ–∏–ª—å–º–æ–≤ –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é —á–µ—Ä–µ–∑ TMDB API.

### 2. –°—Ç—Ä–∞–Ω–∏—Ü–∞ Home
- –û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç –ø–æ–ø—É–ª—è—Ä–Ω—ã–µ —Ñ–∏–ª—å–º—ã –∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø–æ–∏—Å–∫–∞.
- –ú–æ–∂–Ω–æ –ø—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞—Ç—å –¥–µ—Ç–∞–ª–∏ —Ñ–∏–ª—å–º–∞ –≤ –º–æ–¥–∞–ª—å–Ω–æ–º –æ–∫–Ω–µ.

### 3. –î—Ä—É–∑—å—è –∏ —Å–æ—Ü–∏–∞–ª—å–Ω–æ–µ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ
- –ù–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ Friends –º–æ–∂–Ω–æ –∏—Å–∫–∞—Ç—å –¥—Ä—É–∑–µ–π –ø–æ –Ω–∏–∫—É.
- –ü–æ–¥–ø–∏—Å—ã–≤–∞—Ç—å—Å—è –Ω–∞ –¥—Ä—É–∑–µ–π –∏ –ø–æ–ª—É—á–∞—Ç—å –ø–æ–¥–ø–∏—Å–∫–∏ –æ—Ç –¥—Ä—É–≥–∏—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π.

### 4. –ü—Ä–æ—Ñ–∏–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- –°—Ç—Ä–∞–Ω–∏—Ü–∞ Profile –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –≤–∞—à–∏ –ø–æ–¥–ø–∏—Å—á–∏–∫–∏, –ø–æ–¥–ø–∏—Å–∫–∏ –∏ —Ñ–∏–ª—å–º—ã, –¥–æ–±–∞–≤–ª–µ–Ω–Ω—ã–µ –≤ –∏–∑–±—Ä–∞–Ω–Ω–æ–µ.

### 5. –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è
- –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã —Å—Ç—Ä–∞–Ω–∏—Ü—ã Login –∏ Register –¥–ª—è –≤—Ö–æ–¥–∞ –∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π.

### 6. –ù–∞—Å—Ç—Ä–æ–π–∫–∏
- –ù–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ Settings –º–æ–∂–Ω–æ –≤—ã–π—Ç–∏ –∏–∑ –∞–∫–∫–∞—É–Ω—Ç–∞ –∏ —É–ø—Ä–∞–≤–ª—è—Ç—å –ª–∏—á–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏.

Fav-Flicks –æ–±—ä–µ–¥–∏–Ω—è–µ—Ç —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª —Å–æ—Ü–∏–∞–ª—å–Ω–æ–π —Å–µ—Ç–∏ –∏ –∫–∏–Ω–æ–ø–ª–∞—Ç—Ñ–æ—Ä–º—ã, —Å–æ–∑–¥–∞–≤–∞—è —É–¥–æ–±–Ω–æ–µ –º–µ—Å—Ç–æ –¥–ª—è –ø–æ–∏—Å–∫–∞, —Ö—Ä–∞–Ω–µ–Ω–∏—è –∏ –æ–±–º–µ–Ω–∞ –ª—é–±–∏–º—ã–º–∏ —Ñ–∏–ª—å–º–∞–º–∏ —Å –¥—Ä—É–∑—å—è–º–∏.

## –ö–∞–∫ –∑–∞–ø—É—Å—Ç–∏—Ç—å –ø—Ä–æ–µ–∫—Ç

### 1. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
```bash
npm install
```

### 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –≤ Supabase

–°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π –ø—Ä–æ–µ–∫—Ç –≤ Supabase.

–ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **SQL Editor** –∏ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ —Å–ª–µ–¥—É—é—â–∏–π —Å–∫—Ä–∏–ø—Ç –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —Ç–∞–±–ª–∏—Ü –∏ –ø–æ–ª–∏—Ç–∏–∫–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏:
```sql
-- üßπ –ß–∏—Å—Ç–∏–º —Å—Ç–∞—Ä—ã–µ —Ç–∞–±–ª–∏—Ü—ã
drop table if exists follows cascade;
drop table if exists favorites cascade;
drop table if exists profiles cascade;

-- üë§ –¢–∞–±–ª–∏—Ü–∞ –ø—Ä–æ—Ñ–∏–ª–µ–π (–æ—Å–Ω–æ–≤–Ω–∞—è)
create table profiles (
  id uuid not null primary key references auth.users(id) on delete cascade,
  username text,
  avatar_url text
);

-- üé¨ –¢–∞–±–ª–∏—Ü–∞ –∏–∑–±—Ä–∞–Ω–Ω—ã—Ö —Ñ–∏–ª—å–º–æ–≤
create table favorites (
  id bigint generated by default as identity primary key,
  user_id uuid not null references auth.users(id) on delete cascade,
  movie_id int not null,
  created_at timestamptz default now()
);

-- ü§ù –¢–∞–±–ª–∏—Ü–∞ –ø–æ–¥–ø–∏—Å–æ–∫
create table follows (
  id bigint generated by default as identity primary key,
  follower_id uuid not null references profiles(id) on delete cascade,
  following_id uuid not null references profiles(id) on delete cascade,
  created_at timestamptz default now(),
  unique (follower_id, following_id)
);

-- ‚úÖ –í–∫–ª—é—á–∞–µ–º RLS (Row Level Security)
alter table profiles enable row level security;
alter table favorites enable row level security;
alter table follows enable row level security;

-- üîí POLICIES: profiles
create policy "select all profiles"
  on profiles for select
  using (true);

create policy "update own profile"
  on profiles for update
  using (id = auth.uid())
  with check (id = auth.uid());

-- üîí POLICIES: favorites
create policy "insert favorites"
  on favorites for insert
  with check (user_id = auth.uid());

create policy "select favorites"
  on favorites for select
  using (user_id = auth.uid());

create policy "delete favorites"
  on favorites for delete
  using (user_id = auth.uid());

-- üîí POLICIES: follows
create policy "insert follows"
  on follows for insert
  with check (follower_id = auth.uid());

create policy "select follows"
  on follows for select
  using (
    follower_id = auth.uid()
    or following_id = auth.uid()
  );

create policy "delete follows"
  on follows for delete
  using (follower_id = auth.uid());

-- ‚öôÔ∏è –¢—Ä–∏–≥–≥–µ—Ä: –ø—Ä–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å–æ–∑–¥–∞—ë–º –ø—Ä–æ—Ñ–∏–ª—å
create or replace function public.handle_new_user()
returns trigger as $$
begin
  insert into public.profiles (id, username, avatar_url)
  values (
    new.id,
    new.raw_user_meta_data->>'name',
    new.raw_user_meta_data->>'avatar_url'
  );
  return new;
end;
$$ language plpgsql security definer;

create trigger on_auth_user_created
after insert on auth.users
for each row
execute function public.handle_new_user();
```

### 3. –°–æ–∑–¥–∞–Ω–∏–µ .env —Ñ–∞–π–ª–∞

–í –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞ —Å–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `.env` –∏ –¥–æ–±–∞–≤—å—Ç–µ —Å–≤–æ–∏ –∫–ª—é—á–∏:
```env
VITE_API_KEY=–≤–∞—à_API_–∫–ª—é—á_–æ—Ç_TMDB
VITE_SUPABASE_URL=–≤–∞—à_URL_–∏–∑_Supabase
VITE_SUPABASE_ANON_KEY=–≤–∞—à_–∞–Ω–æ–Ω–∏–º–Ω—ã–π_–∫–ª—é—á_–∏–∑_Supabase
```

### 4. –ó–∞–ø—É—Å–∫ –ø—Ä–æ–µ–∫—Ç–∞
```bash
npm run dev
```
